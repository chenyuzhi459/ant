webpackJsonp([6],{1002:function(e,t,n){n(377),n(373),n(374),n(1006),n(1012),n(1011),n(1010),e.exports=n(63).Set},1006:function(e,t,n){"use strict";var r=n(951),a=n(945);e.exports=n(953)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(a(this,"Set"),e=0===e?0:e,e)}},r)},1010:function(e,t,n){n(954)("Set")},1011:function(e,t,n){n(955)("Set")},1012:function(e,t,n){var r=n(82);r(r.P+r.R,"Set",{toJSON:n(952)("Set")})},1013:function(e,t,n){t=e.exports=n(85)(void 0),t.i(n(841),""),t.i(n(957),""),t.push([e.i,".button-new-tag[data-v-04406c9b]{margin-left:10px;height:32px;line-height:30px;padding-top:0;padding-bottom:0}.input-new-tag[data-v-04406c9b]{width:90px;margin-left:10px;vertical-align:bottom}.el-progress-circle svg path[data-v-04406c9b]:first-child{stroke:#c6c6c6}.ruleTypeDiv[data-v-04406c9b]{color:#20a0ff;font-size:18px;line-height:22px;font-weight:700}.edit-default-rule-span[data-v-04406c9b]{position:relative;left:650px;font-weight:700}.progress-div[data-v-04406c9b]{width:540px;position:relative;top:9px}.box-card[data-v-04406c9b]{position:relative;top:15px;font-size:14px;font-weight:600}.total-memory-span[data-v-04406c9b]{position:relative;left:265px}.load-span[data-v-04406c9b]{position:relative;left:400px}.drop-span[data-v-04406c9b]{position:relative;left:450px}.edit-span[data-v-04406c9b]{position:relative;left:550px}.my-tab[data-v-04406c9b],.search-div[data-v-04406c9b],.table[data-v-04406c9b]{position:relative;top:20px}",""])},1052:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("div",{staticStyle:{"margin-left":"20px"}},[n("span",{staticStyle:{color:"#242f42","font-size":"20px"}},[n("el-breadcrumb",{attrs:{separator:">"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/dataSource",query:{showEnable:this.showEnable}}}},[e._v(e._s(e.$t("message.dataSource.dataSourceTitle")))])],1)],1),e._v(" "),n("el-card",{staticClass:"box-card"},[n("span",[e._v("Free Space : "+e._s(this.freeMemory))]),e._v(" "),n("span",{staticClass:"total-memory-span"},[e._v("Total Space : "+e._s(this.totalMemory))]),e._v(" "),n("span",{staticClass:"load-span"},[e._v(e._s(this.segmentsToLoadSize)+" ("+e._s(this.segmentsToLoad)+" segments) to load")]),e._v(" "),n("span",{staticClass:"drop-span"},[e._v(e._s(this.segmentsToDropSize)+" ("+e._s(this.segmentsToDrop)+" segments) to drop")]),e._v(" "),n("span",{staticClass:"edit-span"},[e._v("\n        Cluster Config  \n        "),n("el-button",{attrs:{size:"mini",type:"info",circle:"",icon:"el-icon-edit"},on:{click:e.editClusterConfig}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"info",circle:"",icon:"el-icon-time"},on:{click:e.getClusterHistory}})],1),e._v(" "),n("div",{staticClass:"progress-div"},[n("el-progress",{attrs:{"stroke-width":15,"text-inside":!0,percentage:this.freePercent}})],1)]),e._v(" "),n("el-tabs",{staticClass:"my-tab",on:{"tab-click":e.handleClickTab},model:{value:e.myTab,callback:function(t){e.myTab=t},expression:"myTab"}},[n("el-tab-pane",{attrs:{label:"Enable",name:"enable"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"Disable",name:"disable"}})],1),e._v(" "),n("div",{staticClass:"search-div"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[n("el-form-item",{attrs:{label:e.$t("message.common.name")}},[n("el-input",{attrs:{"suffix-icon":"el-icon-search",placeholder:e.$t("message.common.inputName"),size:"small"},on:{blur:e.onSearch},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.refresh}},[e._v(e._s(e.$t("message.common.refresh")))])],1),e._v(" "),n("span",{staticClass:"edit-default-rule-span"},[n("el-form-item",{attrs:{label:"default rules"}},[n("el-button",{attrs:{size:"mini",type:"info",circle:"",icon:"el-icon-edit"},on:{click:function(t){e.editRule("_default")}}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"info",circle:"",icon:"el-icon-time"},on:{click:function(t){e.getRuleHistory("_default")}}})],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"table",staticStyle:{"margin-left":"20px"}},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.showTableData,border:"",stripe:""},on:{"sort-change":e.handleSort}},[n("el-table-column",{attrs:{label:e.$t("message.common.name"),sortable:"custom",width:330},scopedSlots:e._u([{key:"default",fn:function(t){return[e.showEnable?n("el-progress",{attrs:{type:"circle",percentage:t.row.loadstatus,width:10,"show-text":!1,"stroke-width":2,status:t.row.statusType}}):e._e(),e._v(" "),n("a",{staticClass:"click-link",on:{click:function(n){e.getIntervals(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),e.showEnable?n("el-table-column",{attrs:{prop:"properties.segments.intervalCount",label:e.$t("message.dataSource.intervalCount"),width:"140"}}):e._e(),e._v(" "),e.showEnable?n("el-table-column",{attrs:{prop:"properties.segments.count",label:e.$t("message.dataSource.segmentCount"),width:"140"}}):e._e(),e._v(" "),e.showEnable?n("el-table-column",{attrs:{prop:"properties.segments.size",label:e.$t("message.common.size"),width:"105"}}):e._e(),e._v(" "),e.showEnable?n("el-table-column",{attrs:{prop:"properties.segments.span",label:e.$t("message.dataSource.span"),width:"280"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:e.$t("message.dataSource.rules")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"info",circle:"",icon:"el-icon-edit"},on:{click:function(n){e.editRule(t.row.name)}}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"info",circle:"",icon:"el-icon-time"},on:{click:function(n){e.getRuleHistory(t.row.name)}}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("message.common.more")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.getSegments(t.row)}}},[e._v(e._s(e.$t("message.dataSource.segments")))]),e._v(" "),e.showEnable?[n("el-popover",{ref:"popoverServer",attrs:{placement:"right",width:"150",trigger:"click"}},e._l(e.servers,function(t){return n("div",{key:t,staticClass:"popoverDiv"},[n("a",{staticClass:"click-link",on:{click:function(n){e.routeToServer(t)}}},[e._v(e._s(t))])])})),e._v(" \n            "),n("el-button",{directives:[{name:"popover",rawName:"v-popover:popoverServer",arg:"popoverServer"}],attrs:{size:"mini"},on:{click:function(n){e.getServers(t.row.name)}}},[e._v(e._s(e.$t("message.dataSource.servers")))])]:e._e(),e._v(" "),e.showEnable?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){e.disableDataSource(t.row.name)}}},[e._v(e._s(e.$t("message.common.disable")))]):e._e(),e._v(" "),e.showEnable?e._e():n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){e.enableDataSource(t.row.name)}}},[e._v(e._s(e.$t("message.common.enable")))]),e._v(" "),e.showEnable?e._e():n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.deleteDataSource(t.row.name)}}},[e._v(e._s(e.$t("message.common.delete")))])]}}])})],1),e._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,25,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSources.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.dialogMessage=""}}},[n("template",{slot:"title"},[n("div",{staticStyle:{"line-height":"1","font-size":"16px","font-weight":"700",color:"#1f2d3d"}},[e._v("\n        "+e._s(e.dialogTitle)+"\n      ")])]),e._v(" "),"info"===e.dialogType?n("el-input",{attrs:{type:"textarea",autosize:!0},model:{value:e.dialogMessage,callback:function(t){e.dialogMessage=t},expression:"dialogMessage"}}):e._e(),e._v(" "),e._l(e.addRuleForm,function(t){return"editRule"===e.dialogType?n("el-form",{key:t.id,attrs:{inline:!0,model:t}},[n("div",{staticClass:"ruleTypeDiv"},[e._v("\n        "+e._s(t.type)+"\n        "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",circle:"",icon:"el-icon-delete"},on:{click:function(n){e.removeRule(t.id)}}}),n("br"),n("br")],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("message.dataSource.operate")}},[n("el-select",{attrs:{placeholder:e.$t("message.dataSource.operateInfo"),size:"20"},on:{change:function(n){e.changeActionSelect(t.id)}},model:{value:t.actionValue,callback:function(n){e.$set(t,"actionValue",n)},expression:"ruleItem.actionValue"}},e._l(t.actionOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("message.dataSource.granularity")}},[n("el-select",{attrs:{placeholder:e.$t("message.dataSource.granularityInfo"),size:"20"},on:{change:function(n){e.changeGranularitySelect(t.id)}},model:{value:t.granularityValue,callback:function(n){e.$set(t,"granularityValue",n)},expression:"ruleItem.granularityValue"}},e._l(t.granularityOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("div",[t.showInput?n("el-form-item",{attrs:{label:t.granularityValue}},[n("el-input",{attrs:{placeholder:t.inputPrompt,size:"45"},model:{value:t.inputMessage,callback:function(n){e.$set(t,"inputMessage",n)},expression:"ruleItem.inputMessage"}})],1):e._e(),e._v(" "),"load"===t.actionValue?[e._l(Object.keys(t.tieredReplicants),function(r){return n("el-form-item",{key:r,attrs:{label:r}},[n("el-input-number",{attrs:{min:1,max:100},model:{value:t.tieredReplicants[r],callback:function(n){e.$set(t.tieredReplicants,r,n)},expression:"ruleItem.tieredReplicants[tier]"}}),e._v(" "),n("el-button",{attrs:{type:"info",icon:"el-icon-delete",circle:""},on:{click:function(n){e.deleteTieredReplicant(r,t.id)}}})],1)}),e._v(" "),n("el-form-item",[e.inputVisible?n("el-input",{ref:"saveTagInput",refInFor:!0,staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(n){e.handleInputConfirm(t.id)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Tier")])],1)]:e._e()],2),e._v(" "),n("div",[n("div",{staticStyle:{color:"red",position:"relative",top:"-15px","font-size":"13px"}},[e._v(e._s(t.errorMessage))])])],1):e._e()}),e._v(" "),"clusterConfig"===e.dialogType?n("el-form",{attrs:{model:e.clusterConfigForm,"label-width":"200px"}},[n("el-form-item",{attrs:{label:"emitBalancingStats"}},[n("el-switch",{attrs:{width:60,"on-color":"#13ce66","off-color":"#ff4949","on-text":"true","off-text":"false"},model:{value:e.clusterConfigForm.emitBalancingStats,callback:function(t){e.$set(e.clusterConfigForm,"emitBalancingStats",t)},expression:"clusterConfigForm.emitBalancingStats"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"balancerComputeThreads"}},[n("el-input-number",{attrs:{min:1,max:100},model:{value:e.clusterConfigForm.balancerComputeThreads,callback:function(t){e.$set(e.clusterConfigForm,"balancerComputeThreads",t)},expression:"clusterConfigForm.balancerComputeThreads"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"maxSegmentsToMove"}},[n("el-input-number",{attrs:{min:1,max:100},model:{value:e.clusterConfigForm.maxSegmentsToMove,callback:function(t){e.$set(e.clusterConfigForm,"maxSegmentsToMove",t)},expression:"clusterConfigForm.maxSegmentsToMove"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"mergeBytesLimit"}},[n("el-input-number",{attrs:{min:1,max:100},model:{value:e.clusterConfigForm.mergeBytesLimit,callback:function(t){e.$set(e.clusterConfigForm,"mergeBytesLimit",t)},expression:"clusterConfigForm.mergeBytesLimit"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"mergeSegmentsLimit"}},[n("el-input-number",{attrs:{min:1,max:100},model:{value:e.clusterConfigForm.mergeSegmentsLimit,callback:function(t){e.$set(e.clusterConfigForm,"mergeSegmentsLimit",t)},expression:"clusterConfigForm.mergeSegmentsLimit"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"millisToWaitBeforeDeleting"}},[n("el-input-number",{attrs:{min:1,max:100},model:{value:e.clusterConfigForm.millisToWaitBeforeDeleting,callback:function(t){e.$set(e.clusterConfigForm,"millisToWaitBeforeDeleting",t)},expression:"clusterConfigForm.millisToWaitBeforeDeleting"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"replicantLifetime"}},[n("el-input-number",{attrs:{min:1,max:100},model:{value:e.clusterConfigForm.replicantLifetime,callback:function(t){e.$set(e.clusterConfigForm,"replicantLifetime",t)},expression:"clusterConfigForm.replicantLifetime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"replicationThrottleLimit"}},[n("el-input-number",{attrs:{min:1,max:100},model:{value:e.clusterConfigForm.replicationThrottleLimit,callback:function(t){e.$set(e.clusterConfigForm,"replicationThrottleLimit",t)},expression:"clusterConfigForm.replicationThrottleLimit"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"killDataSourceWhitelist"}},[n("el-input",{model:{value:e.killDataSourceWhitelistString,callback:function(t){e.killDataSourceWhitelistString=t},expression:"killDataSourceWhitelistString"}})],1)],1):e._e(),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["editRule"===e.dialogType?n("el-button",{attrs:{type:"warning",circle:"",icon:"el-icon-plus"},on:{click:e.addARule}}):e._e(),e._v(" "),"info"!==e.dialogType?n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("message.common.cancel")))]):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.clickConfirm()}}},[e._v(e._s(e.$t("message.common.confirm")))])],1)],2)],1)},staticRenderFns:[]}},1088:function(e,t,n){var r=n(1013);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(171)("7f53334d",r,!0)},758:function(e,t,n){n(1088);var r=n(170)(n(978),n(1052),"data-v-04406c9b",null);e.exports=r.exports},775:function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=a(t),this.reject=a(n)}var a=n(370);e.exports.f=function(e){return new r(e)}},776:function(e,t,n){var r=n(168),a=n(62)("toStringTag"),o="Arguments"==r(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=i(t=Object(e),a))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},777:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},778:function(e,t,n){var r=n(81),a=n(83),o=n(775);e.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},779:function(e,t,n){var r=n(81),a=n(370),o=n(62)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||void 0==(n=r(i)[o])?t:a(n)}},780:function(e,t,n){var r,a,o,i=n(369),s=n(790),c=n(379),l=n(172),u=n(41),m=u.process,f=u.setImmediate,p=u.clearImmediate,d=u.MessageChannel,h=u.Dispatch,v=0,g={},b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},y=function(e){b.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete g[e]},"process"==n(168)(m)?r=function(e){m.nextTick(i(b,e,1))}:h&&h.now?r=function(e){h.now(i(b,e,1))}:d?(a=new d,o=a.port2,a.port1.onmessage=y,r=i(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):r="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(i(b,e,1),0)}),e.exports={set:f,clear:p}},781:function(e,t,n){"use strict";t.__esModule=!0;var r=n(788),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){function r(o,i){try{var s=t[o](i),c=s.value}catch(e){return void n(e)}if(!s.done)return a.default.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}},782:function(e,t,n){e.exports=n(798)},783:function(e,t,n){var r=n(369),a=n(792),o=n(791),i=n(81),s=n(376),c=n(784),l={},u={},t=e.exports=function(e,t,n,m,f){var p,d,h,v,g=f?function(){return e}:c(e),b=r(n,m,t?2:1),y=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>y;y++)if((v=t?b(i(d=e[y])[0],d[1]):b(e[y]))===l||v===u)return v}else for(h=g.call(e);!(d=h.next()).done;)if((v=a(h,b,d.value,t))===l||v===u)return v};t.BREAK=l,t.RETURN=u},784:function(e,t,n){var r=n(776),a=n(62)("iterator"),o=n(112);e.exports=n(63).getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||o[r(e)]}},785:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},786:function(e,t,n){var r=n(66);e.exports=function(e,t,n){for(var a in t)n&&e[a]?e[a]=t[a]:r(e,a,t[a]);return e}},787:function(e,t,n){"use strict";var r=n(41),a=n(63),o=n(48),i=n(47),s=n(62)("species");e.exports=function(e){var t="function"==typeof a[e]?a[e]:r[e];i&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},788:function(e,t,n){e.exports={default:n(789),__esModule:!0}},789:function(e,t,n){n(377),n(373),n(374),n(795),n(796),n(797),e.exports=n(63).Promise},790:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},791:function(e,t,n){var r=n(112),a=n(62)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[a]===e)}},792:function(e,t,n){var r=n(81);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},793:function(e,t,n){var r=n(62)("iterator"),a=!1;try{var o=[7][r]();o.return=function(){a=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var o=[7],i=o[r]();i.next=function(){return{done:n=!0}},o[r]=function(){return i},e(o)}catch(e){}return n}},794:function(e,t,n){var r=n(41),a=n(780).set,o=r.MutationObserver||r.WebKitMutationObserver,i=r.process,s=r.Promise,c="process"==n(168)(i);e.exports=function(){var e,t,n,l=function(){var r,a;for(c&&(r=i.domain)&&r.exit();e;){a=e.fn,e=e.next;try{a()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){i.nextTick(l)};else if(o){var u=!0,m=document.createTextNode("");new o(l).observe(m,{characterData:!0}),n=function(){m.data=u=!u}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(l)}}else n=function(){a.call(r,l)};return function(r){var a={fn:r,next:void 0};t&&(t.next=a),e||(e=a,n()),t=a}}},795:function(e,t,n){"use strict";var r,a,o,i,s=n(116),c=n(41),l=n(369),u=n(776),m=n(82),f=n(83),p=n(370),d=n(785),h=n(783),v=n(779),g=n(780).set,b=n(794)(),y=n(775),_=n(777),S=n(778),w=c.TypeError,x=c.process,$=c.Promise,k="process"==u(x),T=function(){},C=a=y.f,D=!!function(){try{var e=$.resolve(1),t=(e.constructor={})[n(62)("species")]=function(e){e(T,T)};return(k||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t}catch(e){}}(),R=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},F=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,a=1==e._s,o=0;n.length>o;)!function(t){var n,o,i=a?t.ok:t.fail,s=t.resolve,c=t.reject,l=t.domain;try{i?(a||(2==e._h&&z(e),e._h=1),!0===i?n=r:(l&&l.enter(),n=i(r),l&&l.exit()),n===t.promise?c(w("Promise-chain cycle")):(o=R(n))?o.call(n,s,c):s(n)):c(r)}catch(e){c(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(c,function(){var t,n,r,a=e._v,o=M(e);if(o&&(t=_(function(){k?x.emit("unhandledRejection",a,e):(n=c.onunhandledrejection)?n({promise:e,reason:a}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",a)}),e._h=k||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},M=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!M(t.promise))return!1;return!0},z=function(e){g.call(c,function(){var t;k?x.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},V=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),F(t,!0))},E=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=R(e))?b(function(){var r={_w:n,_d:!1};try{t.call(e,l(E,r,1),l(V,r,1))}catch(e){V.call(r,e)}}):(n._v=e,n._s=1,F(n,!1))}catch(e){V.call({_w:n,_d:!1},e)}}};D||($=function(e){d(this,$,"Promise","_h"),p(e),r.call(this);try{e(l(E,this,1),l(V,this,1))}catch(e){V.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(786)($.prototype,{then:function(e,t){var n=C(v(this,$));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&F(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(E,e,1),this.reject=l(V,e,1)},y.f=C=function(e){return e===$||e===i?new o(e):a(e)}),m(m.G+m.W+m.F*!D,{Promise:$}),n(114)($,"Promise"),n(787)("Promise"),i=n(63).Promise,m(m.S+m.F*!D,"Promise",{reject:function(e){var t=C(this);return(0,t.reject)(e),t.promise}}),m(m.S+m.F*(s||!D),"Promise",{resolve:function(e){return S(s&&this===i?$:this,e)}}),m(m.S+m.F*!(D&&n(793)(function(e){$.all(e).catch(T)})),"Promise",{all:function(e){var t=this,n=C(t),r=n.resolve,a=n.reject,o=_(function(){var n=[],o=0,i=1;h(e,!1,function(e){var s=o++,c=!1;n.push(void 0),i++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--i||r(n))},a)}),--i||r(n)});return o.e&&a(o.v),n.promise},race:function(e){var t=this,n=C(t),r=n.reject,a=_(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return a.e&&r(a.v),n.promise}})},796:function(e,t,n){"use strict";var r=n(82),a=n(63),o=n(41),i=n(779),s=n(778);r(r.P+r.R,"Promise",{finally:function(e){var t=i(this,a.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},797:function(e,t,n){"use strict";var r=n(82),a=n(775),o=n(777);r(r.S,"Promise",{try:function(e){var t=a.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},798:function(e,t,n){(function(t){var r="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this,a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(380),a)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}}).call(t,n(46))},838:function(e,t,n){e.exports={default:n(839),__esModule:!0}},839:function(e,t,n){n(374),n(373),e.exports=n(840)},840:function(e,t,n){var r=n(81),a=n(784);e.exports=n(63).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},841:function(e,t,n){t=e.exports=n(85)(void 0),t.push([e.i,".click-link{cursor:pointer;color:#20a0ff}.click-link:link{color:blue;text-decoration:none}.click-link:active{color:#20a0ff}.click-link:visited{color:purple;text-decoration:none}.click-link:hover{text-decoration:underline}",""])},945:function(e,t,n){var r=n(83);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},947:function(e,t,n){var r=n(783);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},948:function(e,t,n){var r=n(369),a=n(179),o=n(178),i=n(376),s=n(950);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,u=4==e,m=6==e,f=5==e||m,p=t||s;return function(t,s,d){for(var h,v,g=o(t),b=a(g),y=r(s,d,3),_=i(b.length),S=0,w=n?p(t,_):c?p(t,0):void 0;_>S;S++)if((f||S in b)&&(h=b[S],v=y(h,S,g),e))if(n)w[S]=v;else if(v)switch(e){case 3:return!0;case 5:return h;case 6:return S;case 2:w.push(h)}else if(u)return!1;return m?-1:l||u?u:w}}},949:function(e,t,n){var r=n(83),a=n(393),o=n(62)("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},950:function(e,t,n){var r=n(949);e.exports=function(e,t){return new(r(e))(t)}},951:function(e,t,n){"use strict";var r=n(48).f,a=n(181),o=n(786),i=n(369),s=n(785),c=n(783),l=n(180),u=n(394),m=n(787),f=n(47),p=n(389).fastKey,d=n(945),h=f?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var u=e(function(e,r){s(e,u,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=r&&c(r,n,e[l],e)});return o(u.prototype,{clear:function(){for(var e=d(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var n=d(this,t),r=v(n,e);if(r){var a=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=a),a&&(a.p=o),n._f==r&&(n._f=a),n._l==r&&(n._l=o),n[h]--}return!!r},forEach:function(e){d(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(d(this,t),e)}}),f&&r(u.prototype,"size",{get:function(){return d(this,t)[h]}}),u},def:function(e,t,n){var r,a,o=v(e,t);return o?o.v=n:(e._l=o={i:a=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[h]++,"F"!==a&&(e._i[a]=o)),e},getEntry:v,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=d(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?u(0,n.k):"values"==t?u(0,n.v):u(0,[n.k,n.v]):(e._t=void 0,u(1))},n?"entries":"values",!n,!0),m(t)}}},952:function(e,t,n){var r=n(776),a=n(947);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},953:function(e,t,n){"use strict";var r=n(41),a=n(82),o=n(389),i=n(77),s=n(66),c=n(786),l=n(783),u=n(785),m=n(83),f=n(114),p=n(48).f,d=n(948)(0),h=n(47);e.exports=function(e,t,n,v,g,b){var y=r[e],_=y,S=g?"set":"add",w=_&&_.prototype,x={};return h&&"function"==typeof _&&(b||w.forEach&&!i(function(){(new _).entries().next()}))?(_=t(function(t,n){u(t,_,e,"_c"),t._c=new y,void 0!=n&&l(n,g,t[S],t)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!b||"clear"!=e)&&s(_.prototype,e,function(n,r){if(u(this,_,e),!t&&b&&!m(n))return"get"==e&&void 0;var a=this._c[e](0===n?0:n,r);return t?this:a})}),b||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=v.getConstructor(t,e,g,S),c(_.prototype,n),o.NEED=!0),f(_,e),x[e]=_,a(a.G+a.W+a.F,x),b||v.setStrong(_,e,g),_}},954:function(e,t,n){"use strict";var r=n(82),a=n(370),o=n(369),i=n(783);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return a(this),t=void 0!==c,t&&a(c),void 0==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),i(e,!1,function(e){n.push(s(e,r++))})):i(e,!1,n.push,n),new this(n))}})}},955:function(e,t,n){"use strict";var r=n(82);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},957:function(e,t,n){t=e.exports=n(85)(void 0),t.push([e.i,".popoverDiv{color:#20a0ff;font-size:15px;line-height:22px;font-weight:550}",""])},978:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(390),a=n.n(r),o=n(999),i=n.n(o),s=n(838),c=n.n(s),l=n(782),u=n.n(l),m=n(781),f=n.n(m),p=n(392),d=n.n(p);t.default={data:function(){return{dataSources:[],showTableData:[],dialogMessage:"",dialogTitle:"",dialogVisible:!1,formInline:{name:""},pageSize:10,currentPage:1,isDescending:!1,isSearching:!1,ruleDataSource:"",dataSourceMessage:{dataSourceName:"",dataSourceSize:"",dataSourceSpan:"",segmentCount:0,intervalCount:0},preLocation:"",showEnable:!0,dialogType:"info",addRuleForm:[],ruleItemNextId:1,servers:[],dimensions:[],metrics:[],totalMemory:0,freeMemory:0,freePercent:0,segmentsToLoad:0,segmentsToDrop:0,segmentsToLoadSize:0,segmentsToDropSize:0,clusterConfigForm:{},killDataSourceWhitelistString:"",myTab:"enable",inputVisible:!1,inputValue:""}},created:function(){void 0!==this.$route.query.showEnable&&(this.showEnable=this.$route.query.showEnable,this.myTab=this.showEnable?"enable":"disable"),this.init()},methods:{init:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getMemory(),e.getLoadAndDrop(),e.showEnable?e.getDataSources(e.isDescending,"name",e.formInline.name):e.getDataSourcesDisable(e.isDescending,"name",e.formInline.name);case 3:case"end":return t.stop()}},t,e)}))()},getClusterConfig:function(){var e=this;return f()(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=""+e.$common.apis.clusterConfig,t.next=3,e.$http.get(n);case 3:r=t.sent,e.clusterConfigForm=r.data,e.killDataSourceWhitelistString=e.setToString(e.clusterConfigForm.killDataSourceWhitelist);case 6:case"end":return t.stop()}},t,e)}))()},editClusterConfig:function(){this.getClusterConfig(),this.dialogType="clusterConfig",this.configDialog(this.$t("message.dataSource.clusterConfig"),"",!0,"small",{minRows:15,maxRows:25})},setToString:function(e){var t="";if(void 0===e||null===e)return"";var n=!0,r=!1,a=void 0;try{for(var o,i=c()(e);!(n=(o=i.next()).done);n=!0){t+=o.value+","}}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}return t.substring(0,t.length-1)},getLoadAndDrop:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a,o,i,s,c;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,r=0,a=0,o=0,i=""+e.$common.apis.loadqueue,t.next=4,e.$http.get(i);case 4:s=t.sent;for(c in s.data)r+=s.data[c].segmentsToLoadSize,n+=s.data[c].segmentsToDropSize,a+=s.data[c].segmentsToLoad,o+=s.data[c].segmentsToDrop;e.segmentsToLoad=a,e.segmentsToDrop=o,e.segmentsToLoadSize=e.$common.methods.conver(r),e.segmentsToDropSize=e.$common.methods.conver(n);case 10:case"end":return t.stop()}},t,e)}))()},getMemory:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a,o,i,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,r=0,a=0,o=e.$common.apis.serversInfo+"?simple",t.next=4,e.$http.get(o);case 4:for(i=t.sent,s=0;s<i.data.length;s++)r+=i.data[s].maxSize,n+=i.data[s].currSize;a=r-n,e.freeMemory=e.$common.methods.conver(a),e.totalMemory=e.$common.methods.conver(r),e.freePercent=Number((a/r*100).toFixed(2));case 10:case"end":return t.stop()}},t,e)}))()},removeRule:function(e){for(var t=0;t<this.addRuleForm.length;t++)if(this.addRuleForm[t].id===e){this.addRuleForm.splice(t,1);break}},addARule:function(){var e={id:this.ruleItemNextId++,inputPrompt:"",actionOptions:[{value:"drop",label:"Drop"},{value:"load",label:"Load"}],actionValue:"",granularityOptions:[{value:"period",label:"Period"},{value:"interval",label:"Interval"},{value:"forever",label:"Forever"}],granularityValue:"",inputMessage:"",tieredReplicants:{_default_tier:1},showInput:!1,errorMessage:"",type:"rule"};this.addRuleForm.push(e)},refresh:function(){this.formInline.name="",this.init()},changeGranularitySelect:function(e){for(var t=0;t<this.addRuleForm.length;t++){var n=this.addRuleForm[t];if(n.id===e){n.inputMessage="","period"===n.granularityValue?(n.inputMessage="P1M",n.showInput=!0,n.inputPrompt=this.$t("message.dataSource.periodInputInfo")):"interval"===n.granularityValue?(n.inputMessage=d()().subtract(1,"months").format()+"/"+d()().format(),n.showInput=!0,n.inputPrompt=this.$t("message.dataSource.intervalInputInfo")):n.showInput=!1,n.type=this.getRuleTypeBySelect(n.actionValue,n.granularityValue);break}}},changeActionSelect:function(e){for(var t=0;t<this.addRuleForm.length;t++){var n=this.addRuleForm[t];n.id===e&&(n.type=this.getRuleTypeBySelect(n.actionValue,n.granularityValue))}},getDataSources:function(e,t,n){var r=this;return f()(u.a.mark(function t(){var a,o,i,s,c,l,m,f,p,d,h;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getDataSourcesState();case 2:return a=t.sent,o=r.$common.apis.dataSource+"/sortAndSearch",t.next=6,r.$http.get(o,{params:{simple:!0,isDescending:e,searchDatasource:r.$common.methods.trim(n)}});case 6:for(i=t.sent,s=0;s<i.data.length;s++)c=i.data[s].properties.segments.size,i.data[s].properties.segments.size=r.$common.methods.conver(c),l=i.data[s].name,m=i.data[s].properties.segments.minTime,f=i.data[s].properties.segments.maxTime,p=new Date(m),d=new Date(f),h=r.$common.methods.formatDuring(d.getTime()-p.getTime()),i.data[s].properties.segments.span=m.substring(0,10)+" / "+f.substring(0,10)+" ( "+h+" )",100==a[l]?i.data[s].statusType="success":i.data[s].statusType="exception",i.data[s].loadstatus=a[l];r.dataSources=[],r.$common.methods.pushData(i.data,r.dataSources),r.showTableData=r.$common.methods.fillShowTableData(r.dataSources,r.currentPage,r.pageSize);case 11:case"end":return t.stop()}},t,r)}))()},getDataSourcesState:function(){var e=this;return f()(u.a.mark(function t(){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$common.apis.loadstatus,t.next=3,e.$http.get(n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t,e)}))()},getDataSourcesDisable:function(e,t,n){var r=this;return f()(u.a.mark(function t(){var a,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=""+r.$common.apis.disableDataSource,t.next=3,r.$http.get(a,{params:{isDescending:e,searchDatasource:r.$common.methods.trim(n)}});case 3:o=t.sent,r.dataSources=[],r.$common.methods.pushData(o.data,r.dataSources),r.showTableData=r.$common.methods.fillShowTableData(r.dataSources,r.currentPage,r.pageSize);case 7:case"end":return t.stop()}},t,r)}))()},disableDataSource:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t.$t("message.common.disableWarning")+"\n"+e,a=t.$common.apis.dataSource+"/"+e+"/disable",o=t.$t("message.common.disableSuccess"),i=t.$t("message.common.disableFail"),t.confirmAndGetResult(a,r,o,i,"delete");case 5:case"end":return n.stop()}},n,t)}))()},enableDataSource:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t.$t("message.common.enableWarning")+"\n"+e,a=t.$common.apis.dataSource+"/"+e+"/enable",o=t.$t("message.common.enableSuccess"),i=t.$t("message.common.enableFail"),t.confirmAndGetResult(a,r,o,i,"post");case 5:case"end":return n.stop()}},n,t)}))()},deleteDataSource:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=t.$t("message.common.deleteWarning")+"\n"+e,a=t.$common.apis.dataSource+"/"+e+"/delete",o=t.$t("message.common.deleteSuccess"),i=t.$t("message.common.deleteFail"),t.confirmAndGetResult(a,r,o,i,"delete");case 5:case"end":return n.stop()}},n,t)}))()},confirmAndGetResult:function(e,t,n,r,a){var o=this;return f()(u.a.mark(function i(){var s,c;return u.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o.$confirm(t,o.$t("message.common.warning"),{confirmButtonText:o.$t("message.common.confirm"),cancelButtonText:o.$t("message.common.cancel"),closeOnClickModal:!1,type:"warning"});case 2:if(s=i.sent,i.prev=3,c=void 0,"delete"!==a){i.next=11;break}return i.next=8,o.$http.delete(e);case 8:c=i.sent,i.next=14;break;case 11:return i.next=13,o.$http.post(e);case 13:c=i.sent;case 14:window.setTimeout(o.init,500),o.$message({type:"success",message:n}),i.next=21;break;case 18:i.prev=18,i.t0=i.catch(3),o.$message({type:"warning",message:r});case 21:case"end":return i.stop()}},i,o,[[3,18]])}))()},onSearch:function(){var e=this;return f()(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.showEnable?e.getDataSources(e.isDescending,"name",e.formInline.name):e.getDataSourcesDisable(e.isDescending,"name",e.formInline.name);case 1:case"end":return t.stop()}},t,e)}))()},getDimensions:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.$common.apis.clientInfo+"/"+e+"/dimensions",n.next=3,t.putArrayDataFromUrl(r);case 3:t.dimensions=n.sent;case 4:case"end":return n.stop()}},n,t)}))()},getMetrics:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.$common.apis.clientInfo+"/"+e+"/metrics",n.next=3,t.putArrayDataFromUrl(r);case 3:t.metrics=n.sent;case 4:case"end":return n.stop()}},n,t)}))()},getServers:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.$common.apis.serversInfo+"/datasources/"+e,n.next=3,t.putArrayDataFromUrl(r);case 3:t.servers=n.sent;case 4:case"end":return n.stop()}},n,t)}))()},routeToServer:function(e){this.$router.push({name:"serversSegment",params:{serverName:e},query:{source:"dataSource"}})},putArrayDataFromUrl:function(e){var t=this;return f()(u.a.mark(function n(){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get(e);case 2:return r=n.sent,0===r.data.length&&(r.data[0]=t.$t("message.common.none")),n.abrupt("return",r.data);case 5:case"end":return n.stop()}},n,t)}))()},getRuleHistory:function(e){var t=this.$common.apis.rules+"/"+e+"/history";this.getInfoFromUrl(t,this.$t("message.dataSource.rulesHistory"))},getClusterHistory:function(){var e=this.$common.apis.clusterConfig+"/history";this.getInfoFromUrl(e,this.$t("message.dataSource.clusterConfigHistory"))},getInfoFromUrl:function(e,t){var n=this;return f()(u.a.mark(function r(){var a,o;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.$http.get(e);case 2:a=r.sent,o=n.$common.methods.JSONUtils.toString(a.data),n.dialogType="info",n.configDialog(t,o,!0,"small",{minRows:15,maxRows:25});case 6:case"end":return r.stop()}},r,n)}))()},getRuleInfo:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o,i;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.$common.apis.rules+"/"+e,n.next=3,t.$http.get(r);case 3:for(a=n.sent,o=0;o<a.data.length;o++)i=t.getRuleItemFromInfo(a.data[o]),t.addRuleForm.push(i);case 5:case"end":return n.stop()}},n,t)}))()},getRuleItemFromInfo:function(e){var t=void 0,n=void 0,r=void 0,a={},o=void 0,i=e.type;return i.indexOf("drop")>-1?t="drop":i.indexOf("load")>-1?(t="load",a=e.tieredReplicants,console.log(a)):t="broadcast",i.indexOf("Period")>-1?(r="period",n=!0,o=e.period):i.indexOf("Interval")>-1?(r="interval",n=!0,o=e.interval):(r="forever",n=!1),{id:this.ruleItemNextId++,type:i,actionValue:t,granularityValue:r,inputMessage:o,tieredReplicants:a,showInput:n,inputPrompt:"",errorMessage:"",actionOptions:[{value:"drop",label:"Drop"},{value:"load",label:"Load"}],granularityOptions:[{value:"period",label:"Period"},{value:"interval",label:"Interval"},{value:"forever",label:"Forever"}]}},editRule:function(e){this.addRuleForm=[],this.ruleItemNextId=1,this.getRuleInfo(e),this.ruleDataSource=e,this.dialogType="editRule",this.configDialog(this.$t("message.dataSource.rulesInfo"),"",!0,"small",{minRows:15,maxRows:25})},configDialog:function(e,t,n){this.dialogTitle=e,this.dialogMessage=t,this.dialogVisible=n},getSegments:function(e){this.getDataSourceMessageFromRow(e),this.$router.push({path:"/segment",query:{preLocation:"dataSource",showEnable:this.showEnable,dataSourceName:this.dataSourceMessage.dataSourceName}})},getIntervals:function(e){this.getDataSourceMessageFromRow(e),this.$router.push({path:"/interval",query:{showEnable:this.showEnable,preLocation:"dataSource",dataSourceName:this.dataSourceMessage.dataSourceName}})},getDataSourceMessageFromRow:function(e){this.dataSourceMessage.dataSourceName=e.name,this.showEnable&&(this.dataSourceMessage.dataSourceSize=e.properties.segments.size,this.dataSourceMessage.segmentCount=e.properties.segments.count,this.dataSourceMessage.intervalCount=e.properties.segments.intervalCount,this.dataSourceMessage.dataSourceSpan=e.properties.segments.span)},getIntervalCount:function(e){var t=this;return f()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)}))()},handleCurrentChange:function(e){this.currentPage=e,this.showTableData=this.$common.methods.fillShowTableData(this.dataSources,this.currentPage,this.pageSize)},handleSizeChange:function(e){this.pageSize=e,this.showTableData=this.$common.methods.fillShowTableData(this.dataSources,this.currentPage,this.pageSize)},handleSort:function(e){this.isDescending="descending"===e.order,this.showEnable?this.getDataSources(this.isDescending,e.prop,this.formInline.name):this.getDataSourcesDisable(this.isDescending,e.prop,this.formInline.name)},clickConfirm:function(){"editRule"===this.dialogType?this.checkRuleInfo()&&(this.addRule(),this.dialogVisible=!1):"clusterConfig"===this.dialogType?(this.updateClusterConfig(),this.dialogVisible=!1):this.dialogVisible=!1},updateClusterConfig:function(){var e=this;return f()(u.a.mark(function t(){var n,r,a,o,s,c;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=""+e.$common.apis.clusterConfig,r=e.killDataSourceWhitelistString.split(","),a=new i.a(r),e.clusterConfigForm.killDataSourceWhitelist=a,o=e.$t("message.dataSource.updateRuleWarning"),t.next=7,e.$confirm(o,e.$t("message.common.warning"),{confirmButtonText:e.$t("message.common.confirm"),cancelButtonText:e.$t("message.common.cancel"),closeOnClickModal:!1,type:"warning"});case 7:return s=t.sent,t.prev=8,t.next=11,e.$http.post(n,e.clusterConfigForm);case 11:c=t.sent,window.setTimeout(e.init,500),e.$message({type:"success",message:e.$t("message.dataSource.addRulesSuccess")}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(8),e.$message({type:"warning",message:e.$t("message.dataSource.addRulesFail")});case 19:case"end":return t.stop()}},t,e,[[8,16]])}))()},checkRuleInfo:function(){for(var e=0;e<this.addRuleForm.length;e++){var t=this.addRuleForm[e];if(""===t.actionValue)return t.errorMessage=this.$t("message.error.chooseAction"),!1;if(""===t.granularityValue)return t.errorMessage=this.$t("message.error.chooseGranularity"),!1;if(t.showInput&&0===t.inputMessage.length)return t.errorMessage=t.granularityValue+this.$t("message.error.canNotBeNull"),!1;t.errorMessage=""}return!0},addRule:function(){var e=this;return f()(u.a.mark(function t(){var n,r,o,i,s;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$t("message.dataSource.updateRuleWarning"),r=e.getInputRule(),t.next=4,e.$confirm(n,e.$t("message.common.warning"),{confirmButtonText:e.$t("message.common.confirm"),cancelButtonText:e.$t("message.common.cancel"),closeOnClickModal:!1,type:"warning"});case 4:return o=t.sent,t.prev=5,i=e.$common.apis.rules+"/"+e.ruleDataSource,console.log(a()(r),"postData"),console.log(i),t.next=11,e.$http.post(i,r,{header:{ContentType:"application/json"}});case 11:s=t.sent,window.setTimeout(e.init,500),e.$message({type:"success",message:e.$t("message.dataSource.addRulesSuccess")}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),e.$message({type:"warning",message:e.$t("message.dataSource.addRulesFail")});case 19:case"end":return t.stop()}},t,e,[[5,16]])}))()},getInputRule:function(){for(var e=new Array,t=0;t<this.addRuleForm.length;t++){var n=this.addRuleForm[t],r={};"load"===n.actionValue&&(r.tieredReplicants=n.tieredReplicants),"interval"===n.granularityValue?(r.type=n.actionValue+"ByInterval",r.interval=n.inputMessage):"period"===n.granularityValue?(r.type=n.actionValue+"ByPeriod",r.period=n.inputMessage):r.type=n.actionValue+"Forever",e.push(r)}return e},getRuleTypeBySelect:function(e,t){return""!==e&&""!==t&&void 0!==t?"interval"===t?e+"ByInterval":"period"===t?e+"ByPeriod":e+"Forever":"rule"},getDataSourceByName:function(e){var t=this;return f()(u.a.mark(function n(){var r,a,o;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.$common.apis.dataSource+"/"+e+"?full",n.next=3,t.$http.get(r);case 3:a=n.sent,t.dataSources=[],o=new Array,o[0]=a.data,t.$common.methods.pushData(o,t.dataSources),t.showTableData=t.$common.methods.fillShowTableData(t.dataSources,t.currentPage,t.pageSize);case 9:case"end":return n.stop()}},n,t)}))()},handleClickTab:function(e,t){"enable"===e.name?this.showEnable=!0:this.showEnable=!1,this.init()},deleteTieredReplicant:function(e,t){delete this.addRuleForm[t-1].tieredReplicants[e],this.addRuleForm[t-1].actionValue=void 0,this.addRuleForm[t-1].actionValue="load"},showInput:function(){this.inputVisible=!0},handleInputConfirm:function(e){var t=this.inputValue;t&&(this.addRuleForm[e-1].tieredReplicants[t]=1),this.inputVisible=!1,this.inputValue=""}}}},999:function(e,t,n){e.exports={default:n(1002),__esModule:!0}}});